COMMAND.COM - Wikipedia COMMAND.COM From Wikipedia, the free encyclopedia Jump to navigation Jump to search Default command-line interpreter for DOS, Windows 95, Windows 98 and Windows Me Not to be confused with cmd.exe. COMMAND.COM COMMAND.COM in Windows 8 Other names MS-DOS Prompt, Windows Command Interpreter Developer(s) Seattle Computer Products, IBM, Microsoft, The Software Link, Datalight, Novell, Caldera Initial release 1980; 40 years ago (1980) Written in x86 assembly language[1] Operating system 86-DOS MS-DOS PC DOS DR-DOS SISNE plus PTS-DOS ROM-DOS OS/2 Windows 9x Windows NT (NTVDM) FreeDOS MSX-DOS Platform 16-bit x86 Successor cmd.exe Type Command-line interpreter command.com running in a Windows console on Windows 95 (MS-DOS Prompt) COMMAND.COM is the default command-line interpreter for MS-DOS, Windows 95, Windows 98, Windows 98SE and Windows Me. In the case of DOS, it is the default user interface as well. It has an additional role as the usual first program run after boot (root process), hence being responsible for setting up the system by running the AUTOEXEC.BAT configuration file, and being the ancestor of all processes. COMMAND.COM's successor on OS/2 and Windows NT systems is cmd.exe, although COMMAND.COM is available in virtual DOS machines on IA-32 versions of those operating systems as well. The COMMAND.COM filename was also used by Disk Control Program [de] (DCP), an MS-DOS derivative by the former East German VEB Robotron.[2] The compatible command processor under FreeDOS is sometimes also named FreeCom. COMMAND.COM is a DOS program. Programs launched from COMMAND.COM are DOS programs that use the DOS API to communicate with the disk operating system. Contents 1 Operating modes 2 Internal commands 3 Batch file commands 4 IF command 5 Variables 6 Redirection, piping, and chaining 7 Limitations 8 In popular culture 9 See also 10 References 11 Further reading Operating modes[edit] As a shell, COMMAND.COM has two distinct modes of operation. The first is interactive mode, in which the user types commands which are then executed immediately. The second is batch mode, which executes a predefined sequence of commands stored as a text file with the .BAT extension. Internal commands[edit] Internal commands are commands stored directly inside the COMMAND.COM binary. Thus, they are always available but can only be executed directly from the command interpreter. All commands are executed after the ↵ Enter key is pressed at the end of the line. COMMAND.COM is not case-sensitive, meaning commands can be typed in any mixture of upper and lower case. BREAK Controls the handling of program interruption with Ctrl+C or Ctrl+Break. CHCP Displays or changes the current system code page. CHDIR, CD Changes the current working directory or displays the current directory. CLS Clears the screen. COPY Copies one file to another (if the destination file already exists, MS-DOS asks whether to replace it). (See also XCOPY, an external command that could also copy directory trees). CTTY Defines the device to use for input and output. DATE Display and set the date of the system. DEL, ERASE Deletes a file. When used on a directory, deletes all files inside the directory only. In comparison, the external command DELTREE deletes all subdirectories and files inside a directory as well as the directory itself. DIR Lists the files in the specified directory. ECHO Toggles whether text is displayed (ECHO ON) or not (ECHO OFF). Also displays text on the screen (ECHO text). EXIT Exits from COMMAND.COM and returns to the program which launched it. LFNFOR Enables or disables the return of long filenames by the FOR command. (Windows 9x). LOADHIGH, LH Loads a program into upper memory (HILOAD in DR DOS). LOCK Enables external programs to perform low-level disk access to a volume. (MS-DOS 7.1 and Windows 9x only) MKDIR, MD Creates a new directory. PATH Displays or changes the value of the PATH environment variable which controls the places where COMMAND.COM will search for executable files. PROMPT Displays or change the value of the PROMPT environment variable which controls the appearance of the prompt. RENAME, REN Renames a file or directory. RMDIR, RD Removes an empty directory. SET Sets the value of an environment variable; without arguments, shows all defined environment variables. TIME Display and set the time of the system. TRUENAME Display the fully expanded physical name of a file, resolving ASSIGN, JOIN and SUBST logical filesystem mappings.[3] TYPE Display the content of a file on the console. UNLOCK Disables low-level disk access. (MS-DOS 7.1 and Windows 9x only) VER Displays the version of the operating system. VERIFY Enable or disable verification of writing for files. VOL Shows information about a volume. Batch file commands[edit] Control structures are mostly used inside batch files, although they can also be used interactively.[4][3] :label Defines a target for GOTO. CALL Executes another batch file and returns to the old one and continues. FOR Iteration: repeats a command for each out of a specified set of files. GOTO Moves execution to a specified label. Labels are specified at the beginning of a line, with a colon (:likethis). IF Conditional statement, allows branching of the program execution. PAUSE Halts execution of the program and displays a message asking the user to press any key to continue. REM comment: any text following this command is ignored. SHIFT Replaces each of the replacement parameters with the subsequent one (e.g. %0 with %1, %1 with %2, etc.). IF command[edit] On exit, all external commands submit a return code (a value between 0 and 255) to the calling program. Most programs have a certain convention for their return codes (for instance, 0 for a successful execution).[5][6][7][8] If a program was invoked by COMMAND.COM, the internal IF command with its ERRORLEVEL conditional can be used to test on error conditions of the last invoked external program. Under COMMAND.COM, internal commands do not establish a new value. Variables[edit] Batch files for COMMAND.COM can have four kinds of variables: Environment variables: These have the %VARIABLE% form and are associated with values with the SET statement. Before DOS 3 COMMAND.COM will only expand environment variables in batch mode; that is, not interactively at the command prompt.[citation needed] Replacement parameters: These have the form %0, %1...%9, and initially contain the command name and the first nine command line parameters passed to the script (e.g., if the invoking command was "myscript.bat John Doe", then %0 is "myscript.bat", %1 is "John" and %2 is "Doe"). The parameters to the right of the ninth can be mapped into range by using the SHIFT statement. Loop variables: Used in loops, they have the %%a format when run in batch files. These variables are defined solely within a specific FOR statement, and iterate over a certain set of values defined in that FOR statement. Under Novell DOS 7, OpenDOS 7.01, DR-DOS 7.02 and higher, COMMAND.COM also supports a number of system information variables,[4][9][3] a feature earlier found in 4DOS 3.00 and higher[10] as well as in Multiuser DOS,[3] although most of the supported variable names differ. Redirection, piping, and chaining[edit] Because DOS is a single-tasking operating system, piping is achieved by running commands sequentially, redirecting to and from a temporary file. COMMAND.COM makes no provision for redirecting the standard error channel. command < filename Redirect standard input from a file or device command > filename Redirect standard output, overwriting target file if it exists. command >> filename Redirect standard output, appending to target file if it exists. command1 | command2 Pipe standard output from command1 to standard input of command2 command1 ¶ command2 Commands separated by ASCII-20 (¶, invoked by Ctrl+T) are executed in sequence (chaining of commands).[3] In other words, first command1 is executed until termination, then command2.[3] This is an undocumented feature in COMMAND.COM of MS-DOS/PC DOS 5.0 and higher.[3] It is also supported by COMMAND.COM of the Windows NT family as well as by DR-DOS 7.07. All versions of DR-DOS COMMAND.COM already supported a similar internal function utilizing an exclamation mark (!) instead (a feature originally derived from Concurrent DOS and Multiuser DOS) - however, in the single-user line this feature was only available internally (in built-in startup scripts like "!DATE!TIME") and indirectly through DOSKEY's $T parameter to avoid problems with ! as a valid filename character.[3] 4DOS supports a configurable command line separator (4DOS.INI CommandSep= or SETDOS /C), which defaults to ^.[10] COMMAND.COM in newer versions of Windows NT also supports an & separator for compatibility with the cmd syntax in OS/2 and the Windows NT family.[10] (cmd, however, does not support the ¶ separator.) Limitations[edit] The command line length in interactive mode is limited to 126 characters.[11][12][13] In popular culture[edit] The message "Loading COMMAND.COM" can be seen on a HUD view of the Terminator and the internal viewport of RoboCop when he reboots. In the CGI children's TV series ReBoot, which takes place inside computers, the leader of a system (the equivalent of a city) is called the COMMAND.COM. See also[edit] IBMBIO.COM / IO.SYS (starts the command processor as the first process) SHELL (CONFIG.SYS directive) (to override default command processor) COMSPEC (environment variable) (set by COMMAND.COM to reload transient portion of itself) CMDLINE (environment variable) (set by COMMAND.COM to pass long command lines to external programs) 4DOS / NDOS (third-party replacement command processors) DOSSHELL / ViewMAX (alternative DOS shells) List of DOS commands Comparison of command shells Concurrent DOS / Multiuser DOS / REAL/32 (have similar command processors not named COMMAND.COM) PC-MOS/386 (has a similar command processor also named COMMAND.COM) Transient Program Area (TPA) (area available for use either by the running application or the transient portion of COMMAND.COM) SpartaDOS X (a similar implementation for Atari computers) References[edit] ^ MS-DOS/COMMAND.ASM at master · microsoft/MS-DOS · GitHub ^ Kurth, Rüdiger; Groß, Martin; Hunger, Henry (2016-11-29) [2007]. "Betriebssystem DCP". www.robotrontechnik.de (in German). Archived from the original on 2019-04-03. Retrieved 2019-04-28. ^ a b c d e f g h Paul, Matthias R. (1997-07-30) [1994-05-01]. NWDOS-TIPs — Tips & Tricks rund um Novell DOS 7, mit Blick auf undokumentierte Details, Bugs und Workarounds. MPDOSTIP. Release 157 (in German) (3 ed.). Archived from the original on 2016-11-04. Retrieved 2014-08-06. (NB. The provided link points to a HTML-converted version of the NWDOSTIP.TXT, which is part of the MPDOSTIP.ZIP collection.) [1] ^ a b "Chapter 7: Batch Processing". Caldera DR-DOS 7.02 User Guide. Caldera, Inc. 1998 [1993, 1997]. Archived from the original on 2017-09-11. Retrieved 2017-09-11. ^ Paul, Matthias R. (1997-05-01) [1993-10-01]. BATTIPs — Tips & Tricks zur Programmierung von Batchjobs. MPDOSTIP (in German). Kapitel 7: ERRORLEVEL abfragen. Archived from the original on 2017-08-23. Retrieved 2017-08-23. (NB. BATTIPS.TXT is part of MPDOSTIP.ZIP. The provided link points to a HTML-converted older version of the BATTIPS.TXT file.) [2] ^ Auer, Eric; Paul, Matthias R.; Hall, Jim (2015-12-24) [2003-12-31]. "MS-DOS errorlevels". Archived from the original on 2015-12-24. ^ Paul, Matthias R. (2003) [1997]. Auer, Eric (ed.). "Exitcodes (errorlevels) of DOS utilities". Archived from the original on 2017-09-11. Retrieved 2017-09-11. [3] ^ Allen, William; Allen, Linda. "Windows 95/98/ME ERRORLEVELs". Archived from the original on 2005-10-29. ^ Caldera DR-DOS 7.02 User Guide. Caldera, Inc. 1998 [1993, 1997]. Archived from the original on 2016-11-04. Retrieved 2013-08-10. ^ a b c Brothers, Hardin; Rawson, Tom; Conn, Rex C.; Paul, Matthias R.; Dye, Charles E.; Georgiev, Luchezar I. (2002-02-27). 4DOS 8.00 online help. […] Multiple Commands: You can type several commands on the same command line, separated by a caret [^]. For example, if you know you want to copy all of your .TXT files to drive A: and then run CHKDSK to be sure that drive A's file structure is in good shape, you could enter the following command: C:\>COPY *.TXT A: ^ CHKDSK A: You may put as many commands on the command line as you wish, as long as the total length of the command line does not exceed 511 characters. You can use multiple commands in aliases and batch files as well as at the command line. If you don't like using the default command separator, you can pick another character using the SETDOS /C command or the CommandSep directive in 4DOS.INI. […] SETDOS /C: (Compound character) This option sets the character used for separating multiple commands on the same line. The default is the caret [^]. You cannot use any of the redirection characters [<>|], or the blank, tab, comma, or equal sign as the command separator. The command separator is saved by SETLOCAL and restored by ENDLOCAL. This example changes the separator to a tilde [~]: C:\>SETDOS /C~ (You can specify either the character itself, or its ASCII code as a decimal number, or a hexadecimal number preceded by 0x.) […] CommandSep = c (^): This is the character used to separate multiple commands on the same line. […] Special Character Compatibility: If you use two or more of our products, or if you want to share aliases and batch files with users of different products, you need to be aware of the differences in three important characters: the Command Separator […], the Escape Character […], and the Parameter Character […]. The default values of each of these characters in each product is shown in the following chart: […] Product, Separator, Escape Parameter […] 4DOS: ^, ↑, & […] 4OS2, 4NT, Take Command: &, ^, $ […] (The up-arrow [↑] represents the ASCII Ctrl-X character, numeric value 24.) […] ^ Paul, Matthias R. (1997-07-01) [1994-01-01]. MSDOSTIPs — Tips für den Umgang mit MS-DOS 5.0-7. MPDOSTIP (in German). Archived from the original on 2017-08-22. Retrieved 2013-10-25. (NB. MSDOSTIP.TXT is part of MPDOSTIP.ZIP, maintained up to 2001 and distributed on many sites at the time. The provided link points to a HTML-converted older version of the MSDOSTIP.TXT file.) [4] ^ Paul, Matthias R. (1997-05-01) [1995-03-01]. "Hinweise zu JPSofts 4DOS 5.5b/c, 5.51, 5.52a und NDOS". MPDOSTIP (in German). Archived from the original on 2016-11-04. Retrieved 2015-05-08. (NB. The provided link points to a HTML-converted version of the 4DOS5TIP.TXT file, which is part of the MPDOSTIP.ZIP collection.) [5] ^ Schulman, Andrew; Brown, Ralf D.; Maxey, David; Michels, Raymond J.; Kyle, Jim (1994) [November 1993]. Undocumented DOS: A programmer's guide to reserved MS-DOS functions and data structures - expanded to include MS-DOS 6, Novell DOS and Windows 3.1 (2 ed.). Reading, Massachusetts, USA: Addison Wesley. pp. 623, 626. ISBN 0-201-63287-X. ISBN 978-0-201-63287-3. (xviii+856+vi pages, 3.5"-floppy) Errata: [6][7] Further reading[edit] Cooper, Jim (2001). Special Edition Using MS-DOS 6.22 (3 ed.). Que Publishing. ISBN 978-0-78972573-8. Wolverton, Van (1990). MS-DOS Commands: Microsoft Quick Reference (4th revised ed.). Microsoft Press. ISBN 978-1-55615289-4. Paul, Matthias R. (2004-06-17). "Re: Random Lockups with DR-DOS 7.03". FidoNet conference: ALT_DOS. Archived from the original on 2019-04-28. Retrieved 2019-04-28. […] all MS-DOS versions prior to Windows 95 […] used a COM style COMMAND.COM file which has a special signature at the start of the file […] queried by the MS-DOS BIOS before it loads the shell, but not by the DR-DOS BIOS […] COMMAND.COM would […] check that it is running on the "correct" DOS version, so if you would load their COMMAND.COM under DR-DOS, you would receive a "Bad version" error message and their COMMAND.COM would exit, so DR-DOS would […] display an error message "Bad or missing command interpreter" (if DR-DOS was trying to load the SHELL= command processor after having finished CONFIG.SYS processing). In this case, you could enter the path to a valid DR-DOS COMMAND.COM (C:\DRDOS\COMMAND.COM) and everything was fine. Now, things have changed since MS-DOS 7.0 […] COMMAND.COM has internally become an EXE style file, so there is no magic […] signature […] to check […] thus no way for DR-DOS to rule out an incompatible COMMAND.COM. Further, their COMMAND.COM no longer does any version checks, but […] does not work under DR-DOS […] just crashes […] the PC DOS COMMAND.COM works fine under DR-DOS […] [8][9] v t e Microsoft Windows components Management tools App Installer Command Prompt Control Panel Applets Device Manager Disk Cleanup Disk Defragmenter Driver Verifier DxDiag Event Viewer IExpress Management Console Netsh Performance Monitor Recovery Console Resource Monitor Settings Sysprep System Configuration System File Checker System Information System Policy Editor System Restore Task Manager Windows Error Reporting Windows Ink Windows Installer PowerShell Windows Update Windows Insider WinRE WMI Apps 3D Viewer Alarms & Clock Calculator Calendar Camera Character Map Cortana Edge Fax and Scan Feedback Hub File Manager Get Help Groove Music Magnifier Mail Maps Messaging Movies & TV Mobility Center Money News Narrator Notepad OneDrive OneNote Paint Paint 3D Pay People Phone Companion Photos Quick Assist Snip & Sketch Snipping Tool Speech Recognition Skype Sports Sticky Notes Store Tips Voice Recorder Weather Windows To Go Windows Story Remix WordPad Xbox Console Companion Your Phone Shell Action Center Aero AutoPlay AutoRun ClearType Explorer Search Indexing Service IFilter Saved search Namespace Special folder Start menu Taskbar Task View Windows Spotlight Windows XP visual styles Services Service Control Manager BITS CLFS Multimedia Class Scheduler Shadow Copy Task Scheduler Error Reporting Wireless Zero Configuration File systems CDFS DFS exFAT IFS FAT NTFS Hard link Junction point Mount Point Reparse point Symbolic link TxF EFS ReFS UDF Server Domains Active Directory DNS Group Policy Roaming user profiles Folder redirection Distributed Transaction Coordinator MSMQ Windows Media Services Rights Management Services IIS Remote Desktop Services WSUS SharePoint Network Access Protection PWS DFS Replication Remote Differential Compression Print Services for UNIX Remote Installation Services Windows Deployment Services System Resource Manager Hyper-V Server Core Architecture Architecture of Windows NT Startup process NT Vista CSRSS Desktop Window Manager Portable Executable EXE DLL Enhanced Write Filter Graphics Device Interface hal.dll I/O request packet Imaging Format Kernel Transaction Manager Library files Logical Disk Manager LSASS MinWin NTLDR Ntoskrnl.exe Object Manager Open XML Paper Specification Registry Resource Protection Security Account Manager Server Message Block Shadow Copy SMSS System Idle Process USER WHEA Win32 console Winlogon WinUSB Security Security and Maintenance AppLocker BitLocker Credential Guard Data Execution Prevention Family Safety Kernel Patch Protection Mandatory Integrity Control Protected Media Path User Account Control User Interface Privilege Isolation Windows Defender Windows Firewall Compatibility COMMAND.COM Virtual DOS machine Windows on Windows WoW64 Windows Subsystem for Linux API Active Scripting WSH VBScript JScript COM ActiveX ActiveX Document COM Structured storage DCOM OLE OLE Automation Transaction Server DirectX .NET Framework Universal Windows Platform Windows Mixed Reality Windows Runtime WinUSB Games Solitaire Collection Discontinued Games 3D Pinball Chess Titans FreeCell Hearts InkBall Hold 'Em Purble Place Reversi Spider Solitaire Solitaire Tinker Apps ActiveMovie Anytime Upgrade Address Book Backup and Restore Cardfile CardSpace CD Player Contacts Desktop Gadgets Diagnostics DriveSpace DVD Maker Easy Transfer Fax Food & Drink Help and Support Center Health & Fitness HyperTerminal Journal Media Center Meeting Space Messaging Messenger Mobile Device Center Movie Maker MSN Dial-up NetMeeting NTBackup Outlook Express Travel Photo Gallery Photo Viewer Program Manager Steps Recorder Syskey WinHelp Write Others ScanDisk File Protection Media Control Interface Next-Generation Secure Computing Base POSIX subsystem HPFS Interix Video for Windows Windows SideShow Windows Services for UNIX Windows System Assessment Tool WinFS Spun off to Microsoft Store DVD Player Hover! Mahjong Minesweeper Deprecated Internet Explorer Media Player v t e Windows command-line programs and shell builtins COMMAND.COM Command Prompt Windows PowerShell Recovery Console File system navigation cd (chdir) dir popd pushd tree File management attrib cacls cipher compact copy del (erase) deltree icacls mkdir (md) mklink move openfiles recover ren (rename) replace rmdir (rd) robocopy takeown xcopy Archiving expand extrac32 extract makecab pax tar Disk management chkdsk convert defrag diskcomp diskcopy diskpart diskraid diskshadow drvspace fdisk format fsutil label manage-bde subst scandisk sys vol vssadmin Processes at exit kill powercfg runas sc schtasks shutdown start taskkill tasklist Registry assoc ftype reg regini regsvr32 User environment chcp cmdkey date graftabl mode path set setver setx time title ver where whoami File contents comp edit edlin fc find findstr print type Scripting choice clip cscript doskey echo for forfiles goto if more pause prompt rem timeout Networking arp BITSAdmin cURL getmac hostname ipconfig nbtstat net netsh netstat nslookup PathPing ping rpcping route scp sftp ssh ssh-add ssh-agent ssh-keygen ssh-keyscan tracert winrm winrs Maintenance and care auditpol dispdiag driverquery eventcreate eventtriggers logman mofcomp msiexec ntbackup pnpunattend pnputil REAgentC relog sfc sxstrace systeminfo tracerpt typeperf w32tm WBAdmin wecutil wevtutil winmgmt winsat wmic Boot management bcdedit bootcfg bootsect fixboot fixmbr Software development debug exe2bin QBasic Miscellaneous break cls dism dpath gpresult gpupdate help MSCDEX pentnt wsl List of DOS commands Environment variables Retrieved from "https://en.wikipedia.org/w/index.php?title=COMMAND.COM&oldid=992527908" Categories: Windows commands Command shells Scripting languages DOS files Windows files External DOS commands Hidden categories: CS1 German-language sources (de) Articles with short description Short description matches Wikidata Use dmy dates from April 2019 All articles with unsourced statements Articles with unsourced statements from August 2017 Navigation menu Personal tools Not logged in Talk Contributions Create account Log in Namespaces Article Talk Variants Views Read Edit View history More Search Navigation Main page Contents Current events Random article About Wikipedia Contact us Donate Contribute Help Learn to edit Community portal Recent changes Upload file Tools What links here Related changes Upload file Special pages Permanent link Page information Cite this page Wikidata item Print/export Download as PDF Printable version Languages Català Čeština Deutsch Español Français 한국어 Bahasa Indonesia Italiano עברית Kiswahili Nederlands 日本語 Polski Português Русский ไทย Українська Tiếng Việt 中文 Edit links This page was last edited on 5 December 2020, at 19:09 (UTC). Text is available under the Creative Commons Attribution-ShareAlike License;additional terms may apply. By using this site, you agree to the Terms of Use and Privacy Policy. Wikipedia® is a registered trademark of the Wikimedia Foundation, Inc., a non-profit organization. Privacy policy About Wikipedia Disclaimers Contact Wikipedia Mobile view Developers Statistics Cookie statement